!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.gbPcbVis=t()}}(function(){var t;return function e(t,n,r){function o(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){function r(t){var e={};return i.forEach(t,function(t){var n="pcb-"+t.toLowerCase();e[n]=new a(n,t)}),e}function o(t,e){s.mount(t,{connections:r(e.connections),images:e.images,prefix:i.uniqueId("gbpcbvis-")})}var i={forEach:t("lodash.foreach"),range:t("lodash.range"),uniqueId:t("lodash.uniqueid")},s=t("riot");t("./gb-pcb-vis.tag");var u={};u.cartridge=["VCC","CLK","WR","RD","MREQ"].concat(i.range(16).map(function(t){return"A"+t}),i.range(8).map(function(t){return"D"+t}),["RS","VIN","GND"]),u.mbc1=u.cartridge.concat(["M14","M15","M16","M17","M18"]);var a=function(t,e){this.id=t,this.name=e,this.selected=!1,this.hovering=!1,s.observable(this)};a.prototype.setSelected=function(t){this.selected!=t&&(this.selected=t,this.trigger("selected",t))},a.prototype.setHovering=function(t){this.hovering!=t&&(this.hovering=t,this.trigger("hovering",t))},e.exports={connections:u,mount:o}},{"./gb-pcb-vis.tag":2,"lodash.foreach":3,"lodash.range":5,"lodash.uniqueid":6,riot:10}],2:[function(t,e,n){var r=t("riot");e.exports=r.tag2("gbpcbvis-svg","","","",function(e){function n(t,e,n){n?t.setAttribute(e,""):t.removeAttribute(e)}var r={forEach:t("lodash.foreach")},o=t("superagent");this.connections=e.connections,this.on("mount",function(){var t=this,i=this.root;o.get(e.svg).end(function(e,o){i.innerHTML=o.text,r.forEach(i.querySelectorAll("#pcb-connections > g"),function(e){var r=t.connections[e.id];r&&(r.on("selected",function(t){n(e,"data-selected",t)}),r.on("hovering",function(t){n(e,"data-hovering",t)}))})})})}),r.tag2("gbpcbvis",'<div if="{loaded}" class="controls"> <div class="size" onchange="{onSizeChange}"> <input id="{this.prefix + \'-small\'}" type="radio" name="{this.prefix + \'-size\'}" value="small" __checked="{size === \'small\'}"> <label for="{this.prefix + \'-small\'}">Small</label><br> <input id="{this.prefix + \'-large\'}" type="radio" name="{this.prefix + \'-size\'}" value="large" __checked="{size === \'large\'}"> <label for="{this.prefix + \'-large\'}">Large</label><br> </div> <ul class="connections"><li each="{connectionValues}" class="{selected: selected, hovering: hovering}" onmouseover="{parent.onConnectionMouseover}" onmouseout="{parent.onConnectionMouseout}" onclick="{parent.onConnectionClick}">{name}</li></ul> </div> <div if="{loaded}" class="images"><div data-is="gbpcbvis-svg" each="{svgs}" svg="{svg}" class="{⁗gbpcbvis-svg ⁗ + parent.size}" connections="{parent.connections}" onclick="{parent.onSvgClick}" onmouseover="{parent.onSvgMouseover}" onmouseout="{parent.onSvgMouseout}"></div></div> <div if="{!loaded}" class="placeholders"> <a each="{images}" href="{href}"> <img width="400" riot-src="{thumb}"> </a> </div> <button if="{!loaded}" onclick="{load}">Load interactive PCB visualization</button>',"","",function(e){var n={forEach:t("lodash.foreach"),values:t("lodash.values")};this.prefix=e.prefix,this.loaded=!1,this.images=e.images,this.svgs=[],this.size="small",this.connections=e.connections,this.connectionValues=n.values(this.connections),this.load=function(t){if(!this.loaded){this.loaded=!0;var e=this.svgs;n.forEach(this.images,function(t){e.push(t)})}}.bind(this),this.onSizeChange=function(t){this.size=t.target.value}.bind(this),this.onConnectionClick=function(t){t.item.setSelected(!t.item.selected)}.bind(this),this.onConnectionMouseover=function(t){t.item.setHovering(!0)}.bind(this),this.onConnectionMouseout=function(t){t.item.setHovering(!1)}.bind(this),this.lookupConnection=function(t){for(var e;t&&"pcb-connections"!==t.id;)t.id&&(e=t.id),t=t.parentElement;return this.connections[e]}.bind(this),this.onSvgClick=function(t){var e=this.lookupConnection(t.target);e&&e.setSelected(!e.selected)}.bind(this),this.onSvgMouseover=function(t){var e=this.lookupConnection(t.target);e&&e.setHovering(!0)}.bind(this),this.onSvgMouseout=function(t){var e=this.lookupConnection(t.target);e&&e.setHovering(!1)}.bind(this)})},{"lodash.foreach":3,"lodash.values":8,riot:10,superagent:11}],3:[function(t,e,n){function r(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function o(t){return"function"==typeof t?t:s}function i(t,e){return"function"==typeof e&&a(t)?r(t,e):u(t,o(e))}function s(t){return t}var u=t("lodash._baseeach"),a=Array.isArray;e.exports=i},{"lodash._baseeach":4}],4:[function(t,e,n){function r(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function o(t,e){return t="number"==typeof t||S.test(t)?+t:-1,e=null==e?_:e,t>-1&&t%1==0&&e>t}function i(t,e){return t&&H(t,e,w)}function s(t,e){return O.call(t,e)||"object"==typeof t&&e in t&&null===A(t)}function u(t){return N(Object(t))}function a(t){return function(e){return null==e?void 0:e[t]}}function c(t,e){return function(n,r){if(null==n)return n;if(!d(n))return t(n,r);for(var o=n.length,i=e?o:-1,s=Object(n);(e?i--:++i<o)&&r(s[i],i,s)!==!1;);return n}}function f(t){return function(e,n,r){for(var o=-1,i=Object(e),s=r(e),u=s.length;u--;){var a=s[t?u:++o];if(n(i[a],a,i)===!1)break}return e}}function l(t){var e=t?t.length:void 0;return m(e)&&($(t)||x(t)||h(t))?r(e,String):null}function p(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||k;return t===n}function h(t){return v(t)&&O.call(t,"callee")&&(!M.call(t,"callee")||L.call(t)==j)}function d(t){return null!=t&&m(q(t))&&!g(t)}function v(t){return b(t)&&d(t)}function g(t){var e=y(t)?L.call(t):"";return e==C||e==T}function m(t){return"number"==typeof t&&t>-1&&t%1==0&&_>=t}function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function b(t){return!!t&&"object"==typeof t}function x(t){return"string"==typeof t||!$(t)&&b(t)&&L.call(t)==E}function w(t){var e=p(t);if(!e&&!d(t))return u(t);var n=l(t),r=!!n,i=n||[],a=i.length;for(var c in t)!s(t,c)||r&&("length"==c||o(c,a))||e&&"constructor"==c||i.push(c);return i}var _=9007199254740991,j="[object Arguments]",C="[object Function]",T="[object GeneratorFunction]",E="[object String]",S=/^(?:0|[1-9]\d*)$/,k=Object.prototype,O=k.hasOwnProperty,L=k.toString,A=Object.getPrototypeOf,M=k.propertyIsEnumerable,N=Object.keys,R=c(i),H=f(),q=a("length"),$=Array.isArray;e.exports=R},{}],5:[function(t,e,n){function r(t,e){return t="number"==typeof t||_.test(t)?+t:-1,e=null==e?d:e,t>-1&&t%1==0&&e>t}function o(t){return function(e){return null==e?void 0:e[t]}}function i(t,e,n,r){for(var o=-1,i=S(E((e-t)/(n||1)),0),s=Array(i);i--;)s[r?i:++o]=t,t+=n;return s}function s(t){return function(e,n,r){return r&&"number"!=typeof r&&u(e,n,r)&&(n=r=void 0),e=h(e),e=e===e?e:0,void 0===n?(n=e,e=0):n=h(n)||0,r=void 0===r?n>e?1:-1:h(r)||0,i(e,n,r,t)}}function u(t,e,n){if(!p(n))return!1;var o=typeof e;return("number"==o?c(n)&&r(e,n.length):"string"==o&&e in n)?a(n[e],t):!1}function a(t,e){return t===e||t!==t&&e!==e}function c(t){return null!=t&&l(k(t))&&!f(t)}function f(t){var e=p(t)?T.call(t):"";return e==g||e==m}function l(t){return"number"==typeof t&&t>-1&&t%1==0&&d>=t}function p(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function h(t){if(p(t)){var e=f(t.valueOf)?t.valueOf():t;t=p(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(y,"");var n=x.test(t);return n||w.test(t)?j(t.slice(2),n?2:8):b.test(t)?v:+t}var d=9007199254740991,v=NaN,g="[object Function]",m="[object GeneratorFunction]",y=/^\s+|\s+$/g,b=/^[-+]0x[0-9a-f]+$/i,x=/^0b[01]+$/i,w=/^0o[0-7]+$/i,_=/^(?:0|[1-9]\d*)$/,j=parseInt,C=Object.prototype,T=C.toString,E=Math.ceil,S=Math.max,k=o("length"),O=s();e.exports=O},{}],6:[function(t,e,n){function r(t){var e=++i;return o(t)+e}var o=t("lodash.tostring"),i=0;e.exports=r},{"lodash.tostring":7}],7:[function(t,e,n){(function(t){function r(t){return t&&t.Object===Object?t:null}function o(t){return!!t&&"object"==typeof t}function i(t){return"symbol"==typeof t||o(t)&&y.call(t)==a}function s(t){if("string"==typeof t)return t;if(null==t)return"";if(i(t))return w?w.call(t):"";var e=t+"";return"0"==e&&1/t==-u?"-0":e}var u=1/0,a="[object Symbol]",c={"function":!0,object:!0},f=c[typeof n]&&n&&!n.nodeType?n:void 0,l=c[typeof e]&&e&&!e.nodeType?e:void 0,p=r(f&&l&&"object"==typeof t&&t),h=r(c[typeof self]&&self),d=r(c[typeof window]&&window),v=r(c[typeof this]&&this),g=p||d!==(v&&v.window)&&d||h||v||Function("return this")(),m=Object.prototype,y=m.toString,b=g.Symbol,x=b?b.prototype:void 0,w=x?x.toString:void 0;e.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(t,e,n){function r(t,e){for(var n=-1,r=t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}function o(t,e){return r(e,function(e){return t[e]})}function i(t){return t?o(t,s(t)):[]}var s=t("lodash.keys");e.exports=i},{"lodash.keys":9}],9:[function(t,e,n){function r(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function o(t,e){return t="number"==typeof t||C.test(t)?+t:-1,e=null==e?b:e,t>-1&&t%1==0&&e>t}function i(t,e){return E.call(t,e)||"object"==typeof t&&e in t&&null===k(t)}function s(t){return L(Object(t))}function u(t){return function(e){return null==e?void 0:e[t]}}function a(t){var e=t?t.length:void 0;return d(e)&&(M(t)||m(t)||f(t))?r(e,String):null}function c(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||T;return t===n}function f(t){return p(t)&&E.call(t,"callee")&&(!O.call(t,"callee")||S.call(t)==x)}function l(t){return null!=t&&d(A(t))&&!h(t)}function p(t){return g(t)&&l(t)}function h(t){var e=v(t)?S.call(t):"";return e==w||e==_}function d(t){return"number"==typeof t&&t>-1&&t%1==0&&b>=t}function v(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){return!!t&&"object"==typeof t}function m(t){return"string"==typeof t||!M(t)&&g(t)&&S.call(t)==j}function y(t){var e=c(t);if(!e&&!l(t))return s(t);var n=a(t),r=!!n,u=n||[],f=u.length;for(var p in t)!i(t,p)||r&&("length"==p||o(p,f))||e&&"constructor"==p||u.push(p);return u}var b=9007199254740991,x="[object Arguments]",w="[object Function]",_="[object GeneratorFunction]",j="[object String]",C=/^(?:0|[1-9]\d*)$/,T=Object.prototype,E=T.hasOwnProperty,S=T.toString,k=Object.getPrototypeOf,O=T.propertyIsEnumerable,L=Object.keys,A=u("length"),M=Array.isArray;e.exports=y},{}],10:[function(e,n,r){!function(e,o){"use strict";function i(t,e,n){var r={};return r[t.key]=e,t.pos&&(r[t.pos]=n),r}function s(t,e){for(var n,r=e.length,o=t.length;r>o;)n=e[--r],e.splice(r,1),n.unmount()}function u(t,e){Object.keys(t.tags).forEach(function(n){var r=t.tags[n];N(r)?m(r,function(t){E(t,n,e)}):E(r,n,e)})}function a(t,e,n){var r,o=t._root;for(t._virts=[];o;)r=o.nextSibling,n?e.insertBefore(o,n._root):e.appendChild(o),t._virts.push(o),o=r}function c(t,e,n,r){for(var o,i=t._root,s=0;r>s;s++)o=i.nextSibling,e.insertBefore(i,n._root),i=o}function f(t,e,n){x(t,"each");var r,o=typeof _(t,"no-reorder")!==et||x(t,"no-reorder"),f=L(t),l=Z[f]||{tmpl:t.outerHTML},p=it.test(f),d=t.parentNode,v=document.createTextNode(""),g=C(t),m="option"===f.toLowerCase(),y=[],b=[],w="VIRTUAL"==t.tagName;n=ct.loopKeys(n),d.insertBefore(v,t),e.one("before-mount",function(){t.parentNode.removeChild(t),d.stub&&(d=e.root)}).on("update",function(){var x=ct(n.val,e),_=document.createDocumentFragment();N(x)||(r=x||!1,x=r?Object.keys(x).map(function(t){return i(n,t,x[t])}):[]);for(var j=0,C=x.length;C>j;j++){var T=x[j],E=o&&T instanceof Object&&!r,S=b.indexOf(T),k=~S&&E?S:j,L=y[k];T=!r&&n.key?i(n,T,j):T,!E&&!L||E&&!~S||!L?(L=new h(l,{parent:e,isLoop:!0,hasImpl:!!Z[f],root:p?d:t.cloneNode(),item:T},t.innerHTML),L.mount(),w&&(L._root=L.root.firstChild),j!=y.length&&y[j]?(w?a(L,d,y[j]):d.insertBefore(L.root,y[j].root),b.splice(j,0,T)):w?a(L,_):_.appendChild(L.root),y.splice(j,0,L),k=j):L.update(T,!0),k!==j&&E&&y[j]&&(w?c(L,d,y[j],t.childNodes.length):d.insertBefore(L.root,y[j].root),n.pos&&(L[n.pos]=j),y.splice(j,0,y.splice(k,1)[0]),b.splice(j,0,b.splice(k,1)[0]),!g&&L.tags&&u(L,j)),L._item=T,O(L,"_parent",e)}if(s(x,y),m){if(d.appendChild(_),d.length){var A,M=d.options;for(d.selectedIndex=A=-1,j=0;j<M.length;j++)(M[j].selected=M[j].__selected)&&0>A&&(d.selectedIndex=A=j)}}else d.insertBefore(_,v);g&&(e.tags[f]=y),b=x.slice()})}function l(t,e,n,r){q(t,function(t){if(1==t.nodeType){if(t.isLoop=t.isLoop||t.parentNode&&t.parentNode.isLoop||_(t,"each")?1:0,n){var o=C(t);o&&!t.isLoop&&n.push(S(o,{root:t,parent:e},t.innerHTML,e))}t.isLoop&&!r||X(t,e,[])}})}function p(t,e,n){function r(t,e,r){ct.hasExpr(e)&&n.push(A({dom:t,expr:e},r))}q(t,function(t){var n,o=t.nodeType;return 3==o&&"STYLE"!=t.parentNode.tagName&&r(t,t.nodeValue),1==o?(n=_(t,"each"))?(f(t,e,n),!1):(m(t.attributes,function(e){var n=e.name,o=n.split("__")[1];return r(t,e.value,{attr:o||n,bool:o}),o?(x(t,n),!1):void 0}),C(t)?!1:void 0):void 0})}function h(t,e,n){function r(){var t=_&&v?f:d||f;m(S.attributes,function(e){var n=e.value;h[w(e.name)]=ct.hasExpr(n)?ct(n,t):n}),m(Object.keys(q),function(e){h[w(e)]=ct(q[e],t)})}function i(t){for(var e in C)typeof f[e]!==rt&&R(f,e)&&(f[e]=t[e])}function s(){f.parent&&v&&m(Object.keys(f.parent),function(t){var e=!M(st,t)&&M(P,t);(typeof f[t]===rt||e)&&(e||P.push(t),f[t]=f.parent[t])})}function u(t){f.update(t,!0)}function a(t){if(m(E,function(e){e[t?"mount":"unmount"]()}),d){var e=t?"on":"off";v?d[e]("unmount",f.unmount):d[e]("update",u)[e]("unmount",f.unmount)}}var c,f=V.observable(this),h=z(e.opts)||{},d=e.parent,v=e.isLoop,_=e.hasImpl,C=H(e.item),T=[],E=[],S=e.root,L=S.tagName.toLowerCase(),q={},P=[];t.name&&S._tag&&S._tag.unmount(!0),this.isMounted=!1,S.isLoop=v,S._tag=this,O(this,"_riot_id",++G),A(this,{parent:d,root:S,opts:h,tags:{}},C),m(S.attributes,function(t){var e=t.value;ct.hasExpr(e)&&(q[t.name]=e)}),c=ft(t.tmpl,n),O(this,"update",function(t,e){return t=H(t),s(),t&&b(C)&&(i(t),C=t),A(f,t),r(),f.trigger("update",t),g(T,f),e&&f.parent?f.parent.one("updated",function(){f.trigger("updated")}):pt(function(){f.trigger("updated")}),this}),O(this,"mixin",function(){return m(arguments,function(t){var e;t=typeof t===et?V.mixin(t):t,y(t)?(e=new t,t=t.prototype):e=t,m(Object.getOwnPropertyNames(t),function(t){"init"!=t&&(f[t]=y(e[t])?e[t].bind(f):e[t])}),e.init&&e.init.bind(f)()}),this}),O(this,"mount",function(){r();var e=V.mixin(J);if(e&&f.mixin(e),t.fn&&t.fn.call(f,h),p(c,f,T),a(!0),t.attrs&&$(t.attrs,function(t,e){j(S,t,e)}),(t.attrs||_)&&p(f.root,f,T),f.parent&&!v||f.update(C),f.trigger("before-mount"),v&&!_)S=c.firstChild;else{for(;c.firstChild;)S.appendChild(c.firstChild);S.stub&&(S=d.root)}O(f,"root",S),v&&l(f.root,f.parent,null,!0),!f.parent||f.parent.isMounted?(f.isMounted=!0,f.trigger("mount")):f.parent.one("mount",function(){D(f.root)||(f.parent.isMounted=f.isMounted=!0,f.trigger("mount"))})}),O(this,"unmount",function(t){var e,n=S,r=n.parentNode,i=Q.indexOf(f);if(f.trigger("before-unmount"),~i&&Q.splice(i,1),this._virts&&m(this._virts,function(t){t.parentNode&&t.parentNode.removeChild(t)}),r){if(d)e=k(d),N(e.tags[L])?m(e.tags[L],function(t,n){t._riot_id==f._riot_id&&e.tags[L].splice(n,1)}):e.tags[L]=o;else for(;n.firstChild;)n.removeChild(n.firstChild);t?x(r,"riot-tag"):r.removeChild(n)}f.trigger("unmount"),a(),f.off("*"),f.isMounted=!1,delete S._tag}),l(c,this,E)}function d(t,n,r,o){r[t]=function(t){var i,s=o._parent,u=o._item;if(!u)for(;s&&!u;)u=s._item,s=s._parent;t=t||e.event,R(t,"currentTarget")&&(t.currentTarget=r),R(t,"target")&&(t.target=t.srcElement),R(t,"which")&&(t.which=t.charCode||t.keyCode),t.item=u,n.call(o,t)===!0||/radio|check/.test(r.type)||(t.preventDefault&&t.preventDefault(),t.returnValue=!1),t.preventUpdate||(i=u?k(s):o,i.update())}}function v(t,e,n){t&&(t.insertBefore(n,e),t.removeChild(e))}function g(t,e){m(t,function(t,n){var r=t.dom,o=t.attr,i=ct(t.expr,e),s=t.dom.parentNode;if(t.bool?(i=!!i,"selected"===o&&(r.__selected=i)):null==i&&(i=""),t.value!==i){if(t.value=i,!o)return i+="",void(s&&("TEXTAREA"===s.tagName?(s.value=i,ut||(r.nodeValue=i)):r.nodeValue=i));if("value"===o)return void(r.value=i);if(x(r,o),y(i))d(o,i,r,e);else if("if"==o){var u=t.stub,a=function(){v(u.parentNode,u,r)},c=function(){v(r.parentNode,r,u)};i?u&&(a(),r.inStub=!1,D(r)||q(r,function(t){t._tag&&!t._tag.isMounted&&(t._tag.isMounted=!!t._tag.trigger("mount"))})):(u=t.stub=u||document.createTextNode(""),r.parentNode?c():(e.parent||e).one("updated",c),r.inStub=!0)}else"show"===o?r.style.display=i?"":"none":"hide"===o?r.style.display=i?"none":"":t.bool?(r[o]=i,i&&j(r,o,o)):(0===i||i&&typeof i!==nt)&&(U(o,W)&&o!=Y&&(o=o.slice(W.length)),j(r,o,i))}})}function m(t,e){for(var n,r=t?t.length:0,o=0;r>o;o++)n=t[o],null!=n&&e(n,o)===!1&&o--;return t}function y(t){return typeof t===ot||!1}function b(t){return t&&typeof t===nt}function x(t,e){t.removeAttribute(e)}function w(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})}function _(t,e){return t.getAttribute(e)}function j(t,e,n){t.setAttribute(e,n)}function C(t){return t.tagName&&Z[_(t,tt)||_(t,Y)||t.tagName.toLowerCase()]}function T(t,e,n){var r=n.tags[e];r?(N(r)||r!==t&&(n.tags[e]=[r]),M(n.tags[e],t)||n.tags[e].push(t)):n.tags[e]=t}function E(t,e,n){var r,o=t.parent;o&&(r=o.tags[e],N(r)?r.splice(n,0,r.splice(r.indexOf(t),1)[0]):T(t,e,o))}function S(t,e,n,r){var o=new h(t,e,n),i=L(e.root),s=k(r);return o.parent=s,o._parent=r,T(o,i,s),s!==r&&T(o,i,r),e.root.innerHTML="",o}function k(t){for(var e=t;!C(e.root)&&e.parent;)e=e.parent;return e}function O(t,e,n,r){return Object.defineProperty(t,e,A({value:n,enumerable:!1,writable:!1,configurable:!1},r)),t}function L(t){var e=C(t),n=_(t,"name"),r=n&&!ct.hasExpr(n)?n:e?e.name:t.tagName.toLowerCase();return r}function A(t){for(var e,n=arguments,r=1;r<n.length;++r)if(e=n[r])for(var o in e)R(t,o)&&(t[o]=e[o]);return t}function M(t,e){return~t.indexOf(e)}function N(t){return Array.isArray(t)||t instanceof Array}function R(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return typeof t[e]===rt||n&&n.writable}function H(t){if(!(t instanceof h||t&&typeof t.trigger==ot))return t;var e={};for(var n in t)M(st,n)||(e[n]=t[n]);return e}function q(t,e){if(t){if(e(t)===!1)return;for(t=t.firstChild;t;)q(t,e),t=t.nextSibling}}function $(t,e){for(var n,r=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;n=r.exec(t);)e(n[1].toLowerCase(),n[2]||n[3]||n[4])}function D(t){for(;t;){if(t.inStub)return!0;t=t.parentNode}return!1}function P(t){return document.createElement(t)}function I(t,e){return(e||document).querySelectorAll(t)}function F(t,e){return(e||document).querySelector(t)}function z(t){function e(){}return e.prototype=t,new e}function B(t){return _(t,"id")||_(t,"name")}function X(t,e,n){var r,o=B(t),i=function(i){M(n,o)||(r=N(i),i?(!r||r&&!M(i,t))&&(r?i.push(t):e[o]=[i,t]):e[o]=t)};o&&(ct.hasExpr(o)?e.one("mount",function(){o=B(t),i(e[o])}):i(e[o]))}function U(t,e){return t.slice(0,e.length)===e}function K(t,e,n){var r=Z[e],o=t._innerHTML=t._innerHTML||t.innerHTML;return t.innerHTML="",r&&t&&(r=new h(r,{root:t,opts:n},o)),r&&r.mount&&(r.mount(),M(Q,r)||Q.push(r)),r}var V={version:"v2.3.17",settings:{}},G=0,Q=[],Z={},J="__global_mixin",W="riot-",Y=W+"tag",tt="data-is",et="string",nt="object",rt="undefined",ot="function",it=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,st=["_item","_id","_parent","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],ut=0|(e&&e.document||{}).documentMode;V.observable=function(t){t=t||{};var e={},n=Array.prototype.slice,r=function(t,e){t.replace(/\S+/g,e)};return Object.defineProperties(t,{on:{value:function(n,o){return"function"!=typeof o?t:(r(n,function(t,n){(e[t]=e[t]||[]).push(o),o.typed=n>0}),t)},enumerable:!1,writable:!1,configurable:!1},off:{value:function(n,o){return"*"!=n||o?r(n,function(t){if(o)for(var n,r=e[t],i=0;n=r&&r[i];++i)n==o&&r.splice(i--,1);else delete e[t]}):e={},t},enumerable:!1,writable:!1,configurable:!1},one:{value:function(e,n){function r(){t.off(e,r),n.apply(t,arguments)}return t.on(e,r)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(o){for(var i,s=arguments.length-1,u=new Array(s),a=0;s>a;a++)u[a]=arguments[a+1];return r(o,function(r){i=n.call(e[r]||[],0);for(var o,s=0;o=i[s];++s){if(o.busy)return;o.busy=1,o.apply(t,o.typed?[r].concat(u):u),i[s]!==o&&s--,o.busy=0}e["*"]&&"*"!=r&&t.trigger.apply(t,["*",r].concat(u))}),t},enumerable:!1,writable:!1,configurable:!1}}),t},function(t){function n(t){return t.split(/[\/?#]/)}function r(t,e){var n=new RegExp("^"+e[C](/\*/g,"([^/?#]+?)")[C](/\.\./,".*")+"$"),r=t.match(n);return r?r.slice(1):void 0}function o(t,e){var n;return function(){clearTimeout(n),n=setTimeout(t,e)}}function i(t){d=o(l,1),O[_](T,d),O[_](E,d),L[_](R,p),t&&l(!0)}function s(){this.$=[],t.observable(this),q.on("stop",this.s.bind(this)),q.on("emit",this.e.bind(this))}function u(t){return t[C](/^\/|\/$/,"")}function a(t){return"string"==typeof t}function c(t){return(t||M.href||"")[C](b,"")}function f(t){return"#"==v[0]?(t||M.href||"").split(v)[1]||"":c(t)[C](v,"")}function l(t){var e=0==P;if(!(P>=k)&&(P++,D.push(function(){var e=f();(t||e!=g)&&(q[S]("emit",e),g=e)}),e)){for(;D.length;)D[0](),D.shift();P=0}}function p(t){if(!(1!=t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){for(var e=t.target;e&&"A"!=e.nodeName;)e=e.parentNode;!e||"A"!=e.nodeName||e[j]("download")||!e[j]("href")||e.target&&"_self"!=e.target||-1==e.href.indexOf(M.href.match(b)[0])||(e.href==M.href||e.href.split("#")[0]!=M.href.split("#")[0]&&("#"==v||0===c(e.href).indexOf(v))&&h(f(e.href),e.title||L.title))&&t.preventDefault()}}function h(t,e,n){return A?(t=v+u(t),e=e||L.title,n?A.replaceState(null,e,t):A.pushState(null,e,t),L.title=e,$=!1,l(),$):q[S]("emit",f(t))}var d,v,g,m,y,b=/^.+?\/+[^\/]+/,x="EventListener",w="remove"+x,_="add"+x,j="hasAttribute",C="replace",T="popstate",E="hashchange",S="trigger",k=3,O="undefined"!=typeof e&&e,L="undefined"!=typeof document&&document,A=O&&history,M=O&&(A.location||O.location),N=s.prototype,R=L&&L.ontouchstart?"touchstart":"click",H=!1,q=t.observable(),$=!1,D=[],P=0;N.m=function(t,e,n){!a(t)||e&&!a(e)?e?this.r(t,e):this.r("@",t):h(t,e,n||!1)},N.s=function(){this.off("*"),this.$=[]},N.e=function(t){this.$.concat("@").some(function(e){var n=("@"==e?m:y)(u(t),u(e));return"undefined"!=typeof n?(this[S].apply(null,[e].concat(n)),$=!0):void 0},this)},N.r=function(t,e){"@"!=t&&(t="/"+u(t),this.$.push(t)),this.on(t,e)};var I=new s,F=I.m.bind(I);F.create=function(){var t=new s;return t.m.stop=t.s.bind(t),t.m.bind(t)},F.base=function(t){v=t||"#",g=f()},F.exec=function(){l(!0)},F.parser=function(t,e){t||e||(m=n,y=r),t&&(m=t),e&&(y=e)},F.query=function(){var t={},e=M.href||g;return e[C](/[?&](.+?)=([^&]*)/g,function(e,n,r){t[n]=r}),t},F.stop=function(){H&&(O&&(O[w](T,d),O[w](E,d),L[w](R,p)),q[S]("stop"),H=!1)},F.start=function(t){H||(O&&("complete"==document.readyState?i(t):O[_]("load",function(){setTimeout(function(){i(t)},1)})),H=!0)},F.base(),F.parser(),t.route=F}(V);var at=function(t){function e(t){return t}function n(t,e){return e||(e=m),new RegExp(t.source.replace(/{/g,e[2]).replace(/}/g,e[3]),t.global?c:"")}function r(t){if(t===d)return v;var e=t.split(" ");if(2!==e.length||/[\x00-\x1F<>a-zA-Z0-9'",;\\]/.test(t))throw new Error('Unsupported brackets "'+t+'"');return e=e.concat(t.replace(/(?=[[\]()*+?.^$|])/g,"\\").split(" ")),e[4]=n(e[1].length>1?/{[\S\s]*?}/:v[4],e),e[5]=n(t.length>3?/\\({|})/g:v[5],e),e[6]=n(v[6],e),e[7]=RegExp("\\\\("+e[3]+")|([[({])|("+e[3]+")|"+p,c),e[8]=t,e}function o(t){return t instanceof RegExp?u(t):m[t]}function i(t){(t||(t=d))!==m[8]&&(m=r(t),u=t===d?e:n,m[9]=u(v[9]),m[10]=u(v[10])),g=t}function s(t){var e;t=t||{},e=t.brackets,Object.defineProperty(t,"brackets",{set:i,get:function(){return g},enumerable:!0}),a=t,i(e)}var u,a,c="g",f=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,l=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,p=l.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,h={"(":RegExp("([()])|"+p,c),"[":RegExp("([[\\]])|"+p,c),"{":RegExp("([{}])|"+p,c)},d="{ }",v=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+p,c),d,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],g=t,m=[];return o.split=function(t,e,n){function r(t){e||s?c.push(t&&t.replace(n[5],"$1")):c.push(t)}function o(t,e,n){var r,o=h[e];for(o.lastIndex=n,n=1;(r=o.exec(t))&&(!r[1]||(r[1]===e?++n:--n)););return n?t.length:o.lastIndex}n||(n=m);var i,s,u,a,c=[],f=n[6];for(s=u=f.lastIndex=0;i=f.exec(t);){if(a=i.index,s){if(i[2]){f.lastIndex=o(t,i[2],f.lastIndex);continue}if(!i[3])continue}i[1]||(r(t.slice(u,a)),u=f.lastIndex,f=n[6+(s^=1)],f.lastIndex=u)}return t&&u<t.length&&r(t.slice(u)),c},o.hasExpr=function(t){return m[4].test(t)},o.loopKeys=function(t){var e=t.match(m[9]);return e?{key:e[1],pos:e[2],val:m[0]+e[3].trim()+m[1]}:{val:t.trim()}},o.hasRaw=function(t){return m[10].test(t)},o.array=function(t){return t?r(t):m},Object.defineProperty(o,"settings",{set:s,get:function(){return a}}),o.settings="undefined"!=typeof V&&V.settings||{},o.set=i,o.R_STRINGS=l,o.R_MLCOMMS=f,o.S_QBLOCKS=p,o}(),ct=function(){function t(t,e){return t?(u[t]||(u[t]=r(t))).call(e,n):t}function n(e,n){t.errorHandler&&(e.riotData={tagName:n&&n.root&&n.root.tagName,_riot_id:n&&n._riot_id},t.errorHandler(e))}function r(t){var e=o(t);return"try{return "!==e.slice(0,11)&&(e="return "+e),new Function("E",e+";")}function o(t){var e,n=[],r=at.split(t.replace(/\u2057/g,'"'),1);if(r.length>2||r[0]){var o,s,u=[];for(o=s=0;o<r.length;++o)e=r[o],e&&(e=1&o?i(e,1,n):'"'+e.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(u[s++]=e);e=2>s?u[0]:"["+u.join(",")+'].join("")'}else e=i(r[1],0,n);return n[0]&&(e=e.replace(c,function(t,e){return n[e].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),e}function i(t,e,n){function r(e,n){var r,o=1,i=f[e];for(i.lastIndex=n.lastIndex;r=i.exec(t);)if(r[0]===e)++o;else if(!--o)break;n.lastIndex=o?t.length:i.lastIndex}if("="===t[0]&&(t=t.slice(1)),t=t.replace(a,function(t,e){return t.length>2&&!e?""+(n.push(t)-1)+"~":t}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var o,i=[],u=0;t&&(o=t.match(l))&&!o.index;){var c,p,h=/,|([[{(])|$/g;for(t=RegExp.rightContext,c=o[2]?n[o[2]].slice(1,-1).trim().replace(/\s+/g," "):o[1];p=(o=h.exec(t))[1];)r(p,h);p=t.slice(0,o.index),t=RegExp.rightContext,i[u++]=s(p,1,c)}t=u?u>1?"["+i.join(",")+'].join(" ").trim()':i[0]:s(t,e)}return t}function s(t,e,n){var r;return t=t.replace(h,function(t,e,n,o,i){return n&&(o=r?0:o+t.length,"this"!==n&&"global"!==n&&"window"!==n?(t=e+'("'+n+p+n,o&&(r="."===(i=i[o])||"("===i||"["===i)):o&&(r=!d.test(i.slice(o)))),t}),r&&(t="try{return "+t+"}catch(e){E(e,this)}"),n?t=(r?"function(){"+t+"}.call(this)":"("+t+")")+'?"'+n+'":""':e&&(t="function(v){"+(r?t.replace("return ","v="):"v=("+t+")")+';return v||v===0?v:""}.call(this)'),t}var u={};t.haveRaw=at.hasRaw,t.hasExpr=at.hasExpr,t.loopKeys=at.loopKeys,t.errorHandler=null;var a=RegExp(at.S_QBLOCKS,"g"),c=/\x01(\d+)~/g,f={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g},l=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\x01(\d+)~):/,p='"in this?this:'+("object"!=typeof e?"global":"window")+").",h=/[,{][$\w]+:|(^ *|[^$\w\.])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,d=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;return t.parse=function(t){return t},t.version=at.version="v2.3.21",t}(),ft=function ht(){function ht(n,r){var o=n&&n.match(/^\s*<([-\w]+)/),i=o&&o[1].toLowerCase(),s=P("div");return n=e(n,r),u.test(i)?s=t(s,n,i):s.innerHTML=n,s.stub=!0,s}function t(t,e,n){var r="o"===n[0],o=r?"select>":"table>";if(t.innerHTML="<"+o+e.trim()+"</"+o,o=t.firstChild,r)o.selectedIndex=-1;else{var i=s[n];i&&1===o.childElementCount&&(o=F(i,o))}return o}function e(t,e){if(!n.test(t))return t;var s={};return e=e&&e.replace(o,function(t,e,n){return s[e]=s[e]||n,""}).trim(),t.replace(i,function(t,e,n){return s[e]||n||""}).replace(r,function(t,n){return e||n||""})}var n=/<yield\b/i,r=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,o=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,i=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,s={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},u=ut&&10>ut?it:/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;return ht}(),lt=function(t){if(!e)return{add:function(){},inject:function(){}};var n=function(){var t=P("style");j(t,"type","text/css");var e=F("style[type=riot]");return e?(e.id&&(t.id=e.id),e.parentNode.replaceChild(t,e)):document.getElementsByTagName("head")[0].appendChild(t),t}(),r=n.styleSheet,o="";return Object.defineProperty(t,"styleNode",{value:n,writable:!0}),{add:function(t){o+=t},inject:function(){o&&(r?r.cssText+=o:n.innerHTML+=o,o="")}}}(V),pt=function(t){var e=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame;if(!e||/iP(ad|hone|od).*OS 6/.test(t.navigator.userAgent)){var n=0;e=function(t){var e=Date.now(),r=Math.max(16-(e-n),0);setTimeout(function(){t(n=e+r)},r)}}return e}(e||{});V.util={brackets:at,tmpl:ct},V.mixin=function(){var t={};return function(e,n){return b(e)?(n=e,void(t[J]=A(t[J]||{},n))):n?void(t[e]=n):t[e]}}(),V.tag=function(t,e,n,r,o){return y(r)&&(o=r,/^[\w\-]+\s?=/.test(n)?(r=n,n=""):r=""),n&&(y(n)?o=n:lt.add(n)),t=t.toLowerCase(),Z[t]={name:t,tmpl:e,attrs:r,fn:o},t},V.tag2=function(t,e,n,r,o){return n&&lt.add(n),Z[t]={name:t,tmpl:e,attrs:r,fn:o},t},V.mount=function(t,e,n){function r(t){var e="";return m(t,function(t){/[^-\w]/.test(t)||(t=t.trim().toLowerCase(),e+=",["+tt+'="'+t+'"],['+Y+'="'+t+'"]')}),e}function o(){var t=Object.keys(Z);return t+r(t)}function i(t){if(t.tagName){var r=_(t,tt)||_(t,Y);e&&r!==e&&(r=e,j(t,tt,e));var o=K(t,r||t.tagName.toLowerCase(),n);o&&a.push(o)}else t.length&&m(t,i)}var s,u,a=[];if(lt.inject(),b(e)&&(n=e,e=0),typeof t===et?("*"===t?t=u=o():t+=r(t.split(/, */)),s=t?I(t):[]):s=t,"*"===e){if(e=u||o(),s.tagName)s=I(e,s);else{var c=[];m(s,function(t){c.push(I(e,t))}),s=c}e=0}return i(s),a},V.update=function(){return m(Q,function(t){t.update()})},V.Tag=h,typeof r===nt?n.exports=V:typeof t===ot&&typeof t.amd!==rt?t(function(){return V}):e.riot=V}("undefined"!=typeof window?window:void 0)},{}],11:[function(t,e,n){function r(){}function o(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function i(t){if(!b(t))return t;var e=[];for(var n in t)null!=t[n]&&s(e,n,t[n]);return e.join("&")}function s(t,e,n){return Array.isArray(n)?n.forEach(function(n){s(t,e,n)}):void t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}function u(t){for(var e,n,r={},o=t.split("&"),i=0,s=o.length;s>i;++i)n=o[i],e=n.split("="),r[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return r}function a(t){var e,n,r,o,i=t.split(/\r?\n/),s={};i.pop();for(var u=0,a=i.length;a>u;++u)n=i[u],e=n.indexOf(":"),r=n.slice(0,e).toLowerCase(),o=w(n.slice(e+1)),s[r]=o;return s}function c(t){return/[\/+]json\b/.test(t)}function f(t){return t.split(/ *; */).shift()}function l(t){return m(t.split(/ *; */),function(t,e){var n=e.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(t[r]=o),t},{})}function p(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,
this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=a(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function h(t,e){var n=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new p(n)}catch(r){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=r,t.rawResponse=n.xhr&&n.xhr.responseText?n.xhr.responseText:null,t.statusCode=n.xhr&&n.xhr.status?n.xhr.status:null,n.callback(t)}if(n.emit("response",e),t)return n.callback(t,e);if(e.status>=200&&e.status<300)return n.callback(t,e);var o=new Error(e.statusText||"Unsuccessful HTTP response");o.original=t,o.response=e,o.status=e.status,n.callback(o,e)})}function d(t,e){var n=x("DELETE",t);return e&&n.end(e),n}var v,g=t("emitter"),m=t("reduce"),y=t("./request-base"),b=t("./is-object");v="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var x=e.exports=t("./request").bind(null,h);x.getXHR=function(){if(!(!v.XMLHttpRequest||v.location&&"file:"==v.location.protocol&&v.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var w="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};x.serializeObject=i,x.parseString=u,x.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},x.serialize={"application/x-www-form-urlencoded":i,"application/json":JSON.stringify},x.parse={"application/x-www-form-urlencoded":u,"application/json":JSON.parse},p.prototype.get=function(t){return this.header[t.toLowerCase()]},p.prototype.setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=f(e);var n=l(e);for(var r in n)this[r]=n[r]},p.prototype.parseBody=function(t){var e=x.parse[this.type];return e&&t&&(t.length||t instanceof Object)?e(t):null},p.prototype.setStatusProperties=function(t){1223===t&&(t=204);var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},p.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,r="cannot "+e+" "+n+" ("+this.status+")",o=new Error(r);return o.status=this.status,o.method=e,o.url=n,o},x.Response=p,g(h.prototype);for(var _ in y)h.prototype[_]=y[_];h.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},h.prototype.type=function(t){return this.set("Content-Type",x.types[t]||t),this},h.prototype.responseType=function(t){return this._responseType=t,this},h.prototype.accept=function(t){return this.set("Accept",x.types[t]||t),this},h.prototype.auth=function(t,e,n){switch(n||(n={type:"basic"}),n.type){case"basic":var r=btoa(t+":"+e);this.set("Authorization","Basic "+r);break;case"auto":this.username=t,this.password=e}return this},h.prototype.query=function(t){return"string"!=typeof t&&(t=i(t)),t&&this._query.push(t),this},h.prototype.attach=function(t,e,n){return this._formData||(this._formData=new v.FormData),this._formData.append(t,e,n||e.name),this},h.prototype.send=function(t){var e=b(t),n=this._header["content-type"];if(e&&b(this._data))for(var r in t)this._data[r]=t[r];else"string"==typeof t?(n||this.type("form"),n=this._header["content-type"],"application/x-www-form-urlencoded"==n?this._data=this._data?this._data+"&"+t:t:this._data=(this._data||"")+t):this._data=t;return!e||o(t)?this:(n||this.type("json"),this)},h.prototype.callback=function(t,e){var n=this._callback;this.clearTimeout(),n(t,e)},h.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},h.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},h.prototype.withCredentials=function(){return this._withCredentials=!0,this},h.prototype.end=function(t){var e=this,n=this.xhr=x.getXHR(),i=this._query.join("&"),s=this._timeout,u=this._formData||this._data;this._callback=t||r,n.onreadystatechange=function(){if(4==n.readyState){var t;try{t=n.status}catch(r){t=0}if(0==t){if(e.timedout)return e.timeoutError();if(e.aborted)return;return e.crossDomainError()}e.emit("end")}};var a=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),t.direction="download",e.emit("progress",t)};this.hasListeners("progress")&&(n.onprogress=a);try{n.upload&&this.hasListeners("progress")&&(n.upload.onprogress=a)}catch(f){}if(s&&!this._timer&&(this._timer=setTimeout(function(){e.timedout=!0,e.abort()},s)),i&&(i=x.serializeObject(i),this.url+=~this.url.indexOf("?")?"&"+i:"?"+i),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof u&&!o(u)){var l=this._header["content-type"],p=this._parser||x.serialize[l?l.split(";")[0]:""];!p&&c(l)&&(p=x.serialize["application/json"]),p&&(u=p(u))}for(var h in this.header)null!=this.header[h]&&n.setRequestHeader(h,this.header[h]);return this._responseType&&(n.responseType=this._responseType),this.emit("request",this),n.send("undefined"!=typeof u?u:null),this},x.Request=h,x.get=function(t,e,n){var r=x("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},x.head=function(t,e,n){var r=x("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},x.del=d,x["delete"]=d,x.patch=function(t,e,n){var r=x("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},x.post=function(t,e,n){var r=x("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},x.put=function(t,e,n){var r=x("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r}},{"./is-object":12,"./request":14,"./request-base":13,emitter:15,reduce:17}],12:[function(t,e,n){function r(t){return null!=t&&"object"==typeof t}e.exports=r},{}],13:[function(t,e,n){var r=t("./is-object");n.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},n.parse=function(t){return this._parser=t,this},n.timeout=function(t){return this._timeout=t,this},n.then=function(t,e){return this.end(function(n,r){n?e(n):t(r)})},n.use=function(t){return t(this),this},n.get=function(t){return this._header[t.toLowerCase()]},n.getHeader=n.get,n.set=function(t,e){if(r(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},n.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},n.field=function(e,n){if(!this._formData){var r=t("form-data");this._formData=new r}return this._formData.append(e,n),this}},{"./is-object":12,"form-data":16}],14:[function(t,e,n){function r(t,e,n){return"function"==typeof n?new t("GET",e).end(n):2==arguments.length?new t("GET",e):new t(e,n)}e.exports=r},{}],15:[function(t,e,n){function r(t){return t?o(t):void 0}function o(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===e||r.fn===e){n.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n){n=n.slice(0);for(var r=0,o=n.length;o>r;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],16:[function(t,e,n){e.exports=FormData},{}],17:[function(t,e,n){e.exports=function(t,e,n){for(var r=0,o=t.length,i=3==arguments.length?n:t[r++];o>r;)i=e.call(null,i,t[r],++r,t);return i}},{}]},{},[1])(1)});